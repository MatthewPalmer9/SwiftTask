<table class="table-labels">
  <thead>
    <tr>
      <th scope="col">Task</th>
      <th scope="col">Project</th>
      <th scope="col">Due Date </th>
      <th scope="col">Assigned To</th>
      <th scope="col">Edit/Delete</th>
      <th scope="col">Complete</th>
    </tr>
  </thead>
  <tbody style="width:100%">
    <% @tasks.all.each do |task| %>
      <% if !task.completed %>
        <tr>
            <td><%= task.description %></td>
            <td> <%= task.project.name %> </td>
            <td> <%= task.due_date.strftime("%B %d, %Y") unless task.due_date.nil?  %> </td>
            <% if @user.first_name.nil? %>
                <td> <%= task.user.name %> </td>
            <% else %>
                <td> <%= task.user.first_name %>
            <% end %>
            
            <% if @user.id == Project.find_by(:user_project_id => @user.id).user_project_id %>
              <td> <%= link_to "Edit", edit_task_path(task) %> <hr> <%=  link_to 'Delete', "/destroy/task/#{task.id}", method: :delete, data: { confirm: 'Are you sure you want to delete this task?' }  %> </td>
            <% else %>
              <td></td>
            <% end %>

            <% if task.user_id == @user.id %>
              <td> <a class="" href="/tasks/<%= task.id %>/complete">Complete</a></td>
            <% else %>
              <td></td>
            <% end %>
        </tr>
      <% end %>
    <% end %>
  </tbody>
</table>
